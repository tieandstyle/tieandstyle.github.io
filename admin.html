<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Admin Dashboard - Tie Style</title>
<link rel="manifest" href="manifest.json"/>
<meta name="theme-color" content="#df20df"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet"/>
<script>
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    "primary": "#df20df",
                    "background-light": "#f8f6f8",
                    "background-dark": "#211121",
                },
                fontFamily: {
                    "display": ["Plus Jakarta Sans", "sans-serif"]
                }
            },
        },
    }
</script>
<style>
.stat-card { transition: transform 0.2s; }
.stat-card:hover { transform: translateY(-4px); }
.tab-active { border-bottom: 2px solid #df20df; color: #df20df; }
.modal-backdrop { background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
.image-preview { position: relative; display: inline-block; }
.image-preview .remove-btn { position: absolute; top: -8px; right: -8px; width: 24px; height: 24px; border-radius: 50%; background: #ef4444; color: white; border: none; cursor: pointer; font-size: 12px; display: flex; align-items: center; justify-content: center; }
.upload-btn { background: linear-gradient(135deg, #667eea, #764ba2); }
.upload-btn:hover { background: linear-gradient(135deg, #5a6fd6, #6a4190); }
</style>
<!-- Cloudinary Upload Widget -->
<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-black dark:text-white">

<!-- Login Screen -->
<div id="loginScreen" class="min-h-screen flex items-center justify-center px-4">
  <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl p-8 w-full max-w-md">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-primary mb-2">ğŸ” Admin Login</h1>
      <p class="text-gray-600 dark:text-gray-400">Access the Tie-Style admin dashboard</p>
    </div>
    <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-6">
      <div>
        <label class="block text-sm font-medium mb-2" for="adminEmail">Email</label>
        <input type="email" id="adminEmail" class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-background-dark focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="admin@tiestyle.com" required/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-2" for="adminPassword">Password</label>
        <input type="password" id="adminPassword" class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-background-dark focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required/>
      </div>
      <button type="submit" class="w-full bg-primary text-white font-bold py-3 rounded-lg hover:bg-primary/90 transition-all" id="loginBtn">Login</button>
    </form>
    <p id="loginError" class="text-red-500 text-sm mt-3 hidden"></p>
  </div>
</div>

<!-- Dashboard -->
<div id="dashboardScreen" class="hidden min-h-screen">
  <!-- Header -->
  <header class="bg-white dark:bg-background-dark border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-3">
          <h1 class="text-xl font-bold text-primary">ğŸ“Š Tie-Style Admin</h1>
        </div>
        <div class="flex items-center gap-4">
          <span id="adminEmail" class="text-sm text-gray-600 dark:text-gray-400 hidden sm:block"></span>
          <button onclick="handleLogout()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm">Logout</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation Tabs -->
  <nav class="bg-white dark:bg-background-dark border-b border-gray-200 dark:border-gray-700 overflow-x-auto">
    <div class="container mx-auto px-4">
      <div class="flex gap-1">
        <button onclick="switchTab('dashboard')" id="dashboardTab" class="px-5 py-4 text-sm font-medium whitespace-nowrap tab-active">ğŸ“ˆ Dashboard</button>
        <button onclick="switchTab('products')" id="productsTab" class="px-5 py-4 text-sm font-medium whitespace-nowrap hover:text-primary transition">ğŸ“¦ Products</button>
        <button onclick="switchTab('categories')" id="categoriesTab" class="px-5 py-4 text-sm font-medium whitespace-nowrap hover:text-primary transition">ğŸ“ Categories</button>
        <button onclick="switchTab('orders')" id="ordersTab" class="px-5 py-4 text-sm font-medium whitespace-nowrap hover:text-primary transition">ğŸ›’ Orders</button>
        <button onclick="switchTab('store')" id="storeTab" class="px-5 py-4 text-sm font-medium whitespace-nowrap hover:text-primary transition">âš™ï¸ Store Settings</button>
        <button onclick="switchTab('news')" id="newsTab" class="px-5 py-4 text-sm font-medium whitespace-nowrap hover:text-primary transition">ğŸ“¢ News</button>
      </div>
    </div>
  </nav>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-6">
    
    <!-- Dashboard View -->
    <div id="dashboardView">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <div class="stat-card bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-5">
          <p class="text-sm opacity-90 mb-1">Total Products</p>
          <p class="text-2xl font-bold" id="totalProducts">0</p>
        </div>
        <div class="stat-card bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-5">
          <p class="text-sm opacity-90 mb-1">Total Orders</p>
          <p class="text-2xl font-bold" id="totalOrders">0</p>
        </div>
        <div class="stat-card bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-5">
          <p class="text-sm opacity-90 mb-1">Categories</p>
          <p class="text-2xl font-bold" id="totalCategories">0</p>
        </div>
        <div class="stat-card bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-lg p-5">
          <p class="text-sm opacity-90 mb-1">Pending Orders</p>
          <p class="text-2xl font-bold" id="pendingOrders">0</p>
        </div>
      </div>
      <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
        <h3 class="font-bold mb-4">Recent Orders</h3>
        <div id="recentOrdersList" class="space-y-3">Loading...</div>
      </div>
    </div>

    <!-- Products View -->
    <div id="productsView" class="hidden">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <h2 class="text-xl font-bold">ğŸ“¦ Products</h2>
        <button onclick="openProductModal()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition font-medium">+ Add Product</button>
      </div>
      <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
          <input type="text" id="productSearch" placeholder="Search products..." class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" oninput="filterProducts()"/>
        </div>
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-gray-50 dark:bg-gray-800">
              <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Image</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">SKU</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Price</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Stock</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
              </tr>
            </thead>
            <tbody id="productsTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
              <tr><td colspan="7" class="px-4 py-8 text-center text-gray-500">Loading...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Categories View -->
    <div id="categoriesView" class="hidden">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <h2 class="text-xl font-bold">ğŸ“ Categories</h2>
        <div class="flex gap-2">
          <button onclick="openCategoryModal()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition font-medium">+ Add Category</button>
          <button onclick="openSubcategoryModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition font-medium">+ Add Subcategory</button>
        </div>
      </div>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg">
          <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 font-bold">Categories</div>
          <div id="categoriesList" class="divide-y divide-gray-200 dark:divide-gray-700">Loading...</div>
        </div>
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg">
          <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 font-bold">Subcategories</div>
          <div id="subcategoriesList" class="divide-y divide-gray-200 dark:divide-gray-700">Loading...</div>
        </div>
      </div>
    </div>

    <!-- Orders View -->
    <div id="ordersView" class="hidden">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <h2 class="text-xl font-bold">ğŸ›’ Orders</h2>
        <select id="orderStatusFilter" onchange="filterOrders()" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark">
          <option value="all">All Orders</option>
          <option value="pending">ğŸ“ Pending</option>
          <option value="processing">âš™ï¸ Processing</option>
          <option value="packed">ğŸ“¦ Packed</option>
          <option value="dispatched">ğŸšš Dispatched</option>
          <option value="in-transit">ğŸ›£ï¸ In Transit</option>
          <option value="out-for-delivery">ğŸƒ Out for Delivery</option>
          <option value="delivered">âœ… Delivered</option>
          <option value="cancelled">âŒ Cancelled</option>
        </select>
      </div>
      <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden">
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-gray-50 dark:bg-gray-800">
              <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Order ID</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Customer</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Items</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Total</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
              </tr>
            </thead>
            <tbody id="ordersTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
              <tr><td colspan="7" class="px-4 py-8 text-center text-gray-500">Loading...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Store Settings View -->
    <div id="storeView" class="hidden">
      <h2 class="text-xl font-bold mb-6">âš™ï¸ Store Settings</h2>
      <form id="storeSettingsForm" class="space-y-6">
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <h3 class="font-bold mb-4">Basic Info</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Store Name</label>
              <input type="text" id="storeName" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Description</label>
              <input type="text" id="storeDescription" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Logo URL</label>
              <input type="text" id="storeLogo" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Banner Image URL</label>
              <input type="text" id="storeBanner" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
          </div>
        </div>
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <h3 class="font-bold mb-4">Contact</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Phone (E164)</label>
              <input type="text" id="storePhone" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="+919876543210"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Email</label>
              <input type="email" id="storeEmail" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
          </div>
        </div>
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <h3 class="font-bold mb-4">Payment</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">UPI ID</label>
              <input type="text" id="storeUpiId" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">QR Code Image URL</label>
              <input type="text" id="storeQr" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
          </div>
        </div>
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <h3 class="font-bold mb-4">ğŸ’³ Razorpay (Online Payment)</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Razorpay Key ID</label>
              <input type="text" id="razorpayKeyId" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="rzp_test_xxxxx or rzp_live_xxxxx"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Cloudflare Worker URL</label>
              <input type="text" id="razorpayWorkerUrl" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="https://your-worker.workers.dev"/>
            </div>
          </div>
          <p class="text-xs text-gray-500 mt-2">âš ï¸ Keep your Key Secret only in Cloudflare Worker (never in frontend)</p>
        </div>
        
        <!-- Cloudinary Image Hosting Section -->
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <h3 class="font-bold mb-4">ğŸ“· Cloudinary Image Hosting</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Cloud Name *</label>
              <input type="text" id="cloudinaryCloudName" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="your-cloud-name"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Upload Preset (Unsigned) *</label>
              <input type="text" id="cloudinaryUploadPreset" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="your-preset-name"/>
            </div>
          </div>
          <p class="text-xs text-gray-500 mt-2">ğŸ’¡ Create an unsigned upload preset in Cloudinary: Settings â†’ Upload â†’ Upload Presets â†’ Add Upload Preset</p>
        </div>
        
        <!-- Delivery Management Section -->
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="font-bold">ğŸšš Delivery Rates</h3>
            <button type="button" onclick="openDeliveryRateModal()" class="bg-primary text-white px-3 py-1 rounded-lg text-sm hover:bg-primary/90">+ Add State</button>
          </div>
          
          <div class="grid md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium mb-1">Free Shipping Minimum (â‚¹)</label>
              <input type="number" id="storeFreeShipping" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="999"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Shipping Policy</label>
              <input type="text" id="storeShippingPolicy" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark"/>
            </div>
          </div>
          
          <div class="overflow-x-auto border rounded-lg max-h-64 overflow-y-auto">
            <table class="w-full text-sm">
              <thead class="bg-gray-50 dark:bg-gray-800 sticky top-0">
                <tr>
                  <th class="px-3 py-2 text-left">State</th>
                  <th class="px-3 py-2 text-left">Region</th>
                  <th class="px-3 py-2 text-left">Charge (â‚¹)</th>
                  <th class="px-3 py-2 text-left">Actions</th>
                </tr>
              </thead>
              <tbody id="deliveryRatesTable" class="divide-y divide-gray-200 dark:divide-gray-700">
                <tr><td colspan="4" class="px-3 py-4 text-center text-gray-500">Loading...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- Abroad Shipping Section -->
        <div class="bg-white dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="font-bold">ğŸŒ International / Abroad Shipping</h3>
            <div class="flex items-center gap-2">
              <input type="checkbox" id="abroadEnabled" class="w-4 h-4 accent-primary"/>
              <label for="abroadEnabled" class="text-sm">Enable Abroad Orders</label>
            </div>
          </div>
          
          <div id="abroadSettings" class="grid md:grid-cols-3 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Base Shipping (â‚¹)</label>
              <input type="number" id="abroadBaseCharge" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="1500"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Per KG Rate (â‚¹)</label>
              <input type="number" id="abroadPerKg" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="500"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Estimated Days</label>
              <input type="text" id="abroadDays" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="15-21 days"/>
            </div>
          </div>
          <div class="mt-4">
            <label class="block text-sm font-medium mb-1">Countries Served (comma-separated)</label>
            <input type="text" id="abroadCountries" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-dark" placeholder="USA, UK, Canada, Australia, UAE, Singapore"/>
          </div>
        </div>
        
        <button type="submit" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition font-bold">ğŸ’¾ Save Settings</button>
      </form>
    </div>

    <!-- News View -->
    <div id="newsView" class="hidden">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <h2 class="text-xl font-bold">ğŸ“¢ News & Promotions</h2>
        <button onclick="openNewsModal()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition font-medium">+ Add News</button>
      </div>
      <div id="newsList" class="grid gap-4">Loading...</div>
    </div>

  </main>
</div>

<!-- Product Modal -->
<div id="productModal" class="fixed inset-0 modal-backdrop z-50 hidden items-center justify-center p-4" onclick="if(event.target===this) closeProductModal()">
  <div class="bg-white dark:bg-background-dark rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-auto">
    <div class="sticky top-0 bg-white dark:bg-background-dark border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold" id="productModalTitle">Add Product</h3>
      <button onclick="closeProductModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
    </div>
    <form id="productForm" class="p-6 space-y-4">
      <input type="hidden" id="productId"/>
      <div class="grid md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1">Title *</label>
          <input type="text" id="productTitle" required class="w-full px-3 py-2 border rounded-lg"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">SKU *</label>
          <div class="flex gap-2">
            <input type="text" id="productSku" required class="w-full px-3 py-2 border rounded-lg"/>
            <button type="button" onclick="generateNewSku()" class="px-3 py-2 border rounded-lg hover:bg-gray-50" title="Generate SKU">ğŸ”„</button>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Price *</label>
          <input type="number" id="productPrice" required class="w-full px-3 py-2 border rounded-lg"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Compare At Price</label>
          <input type="number" id="productComparePrice" class="w-full px-3 py-2 border rounded-lg"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Stock *</label>
          <input type="number" id="productStock" required class="w-full px-3 py-2 border rounded-lg"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Category</label>
          <select id="productCategory" onchange="onCategoryChange()" class="w-full px-3 py-2 border rounded-lg">
            <option value="">Select category</option>
          </select>
        </div>
        <div id="subcategoryWrapper" class="hidden">
          <label class="block text-sm font-medium mb-1">Subcategory</label>
          <select id="productSubcategory" class="w-full px-3 py-2 border rounded-lg">
            <option value="">Select subcategory</option>
          </select>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Short Description</label>
        <input type="text" id="productShortDesc" class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Description</label>
        <textarea id="productDescription" rows="3" class="w-full px-3 py-2 border rounded-lg"></textarea>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Product Images</label>
        <div class="flex gap-2 mb-2">
          <button type="button" onclick="openImageUpload('productImages', true)" class="upload-btn text-white px-4 py-2 rounded-lg text-sm font-medium">ğŸ“· Upload Images</button>
          <span class="text-xs text-gray-500 self-center">or paste URLs below</span>
        </div>
        <div id="productImagesPreview" class="flex flex-wrap gap-2 mb-2"></div>
        <input type="text" id="productImages" class="w-full px-3 py-2 border rounded-lg text-sm" placeholder="https://..., https://..." oninput="updateImagePreview('productImages')"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Sizes (comma-separated)</label>
        <input type="text" id="productSizes" class="w-full px-3 py-2 border rounded-lg" placeholder="S, M, L, XL"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Tags (comma-separated)</label>
        <input type="text" id="productTags" class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div class="flex items-center gap-2">
        <input type="checkbox" id="productAvailable" checked/>
        <label for="productAvailable" class="text-sm">Available for purchase</label>
      </div>
      <div class="flex gap-3 pt-4">
        <button type="submit" class="flex-1 bg-primary text-white py-2 rounded-lg font-medium hover:bg-primary/90">Save Product</button>
        <button type="button" onclick="closeProductModal()" class="px-6 py-2 border rounded-lg hover:bg-gray-100">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Category Modal -->
<div id="categoryModal" class="fixed inset-0 modal-backdrop z-50 hidden items-center justify-center p-4" onclick="if(event.target===this) closeCategoryModal()">
  <div class="bg-white dark:bg-background-dark rounded-lg shadow-2xl w-full max-w-md">
    <div class="border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold" id="categoryModalTitle">Add Category</h3>
      <button onclick="closeCategoryModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
    </div>
    <form id="categoryForm" class="p-6 space-y-4">
      <input type="hidden" id="categoryId"/>
      <div>
        <label class="block text-sm font-medium mb-1">Name *</label>
        <input type="text" id="categoryName" required class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Description</label>
        <input type="text" id="categoryDescription" class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Category Image</label>
        <div class="flex gap-2 mb-2">
          <button type="button" onclick="openImageUpload('categoryImage', false)" class="upload-btn text-white px-3 py-1.5 rounded-lg text-sm font-medium">ğŸ“· Upload</button>
          <span class="text-xs text-gray-500 self-center">or paste URL</span>
        </div>
        <div id="categoryImagePreview" class="mb-2"></div>
        <input type="text" id="categoryImage" class="w-full px-3 py-2 border rounded-lg text-sm" oninput="updateImagePreview('categoryImage')"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Order</label>
        <input type="number" id="categoryOrder" value="0" class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div class="flex items-center gap-2">
        <input type="checkbox" id="categoryActive" checked/>
        <label for="categoryActive" class="text-sm">Active</label>
      </div>
      <div class="flex gap-3 pt-2">
        <button type="submit" class="flex-1 bg-primary text-white py-2 rounded-lg font-medium">Save</button>
        <button type="button" onclick="closeCategoryModal()" class="px-6 py-2 border rounded-lg">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Subcategory Modal -->
<div id="subcategoryModal" class="fixed inset-0 modal-backdrop z-50 hidden items-center justify-center p-4" onclick="if(event.target===this) closeSubcategoryModal()">
  <div class="bg-white dark:bg-background-dark rounded-lg shadow-2xl w-full max-w-md">
    <div class="border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold" id="subcategoryModalTitle">Add Subcategory</h3>
      <button onclick="closeSubcategoryModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
    </div>
    <form id="subcategoryForm" class="p-6 space-y-4">
      <input type="hidden" id="subcategoryId"/>
      <div>
        <label class="block text-sm font-medium mb-1">Name *</label>
        <input type="text" id="subcategoryName" required class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Parent Category *</label>
        <select id="subcategoryParent" required class="w-full px-3 py-2 border rounded-lg">
          <option value="">Select parent</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Description</label>
        <input type="text" id="subcategoryDescription" class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Order</label>
        <input type="number" id="subcategoryOrder" value="0" class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div class="flex items-center gap-2">
        <input type="checkbox" id="subcategoryActive" checked/>
        <label for="subcategoryActive" class="text-sm">Active</label>
      </div>
      <div class="flex gap-3 pt-2">
        <button type="submit" class="flex-1 bg-purple-600 text-white py-2 rounded-lg font-medium">Save</button>
        <button type="button" onclick="closeSubcategoryModal()" class="px-6 py-2 border rounded-lg">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- News Modal -->
<div id="newsModal" class="fixed inset-0 modal-backdrop z-50 hidden items-center justify-center p-4" onclick="if(event.target===this) closeNewsModal()">
  <div class="bg-white dark:bg-background-dark rounded-lg shadow-2xl w-full max-w-md">
    <div class="border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold" id="newsModalTitle">Add News</h3>
      <button onclick="closeNewsModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
    </div>
    <form id="newsForm" class="p-6 space-y-4">
      <input type="hidden" id="newsId"/>
      <div>
        <label class="block text-sm font-medium mb-1">Title *</label>
        <input type="text" id="newsTitle" required class="w-full px-3 py-2 border rounded-lg"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Content</label>
        <textarea id="newsContent" rows="3" class="w-full px-3 py-2 border rounded-lg"></textarea>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">News Image</label>
        <div class="flex gap-2 mb-2">
          <button type="button" onclick="openImageUpload('newsImage', false)" class="upload-btn text-white px-3 py-1.5 rounded-lg text-sm font-medium">ğŸ“· Upload</button>
          <span class="text-xs text-gray-500 self-center">or paste URL</span>
        </div>
        <div id="newsImagePreview" class="mb-2"></div>
        <input type="text" id="newsImage" class="w-full px-3 py-2 border rounded-lg text-sm" oninput="updateImagePreview('newsImage')"/>
      </div>
      <div class="flex items-center gap-2">
        <input type="checkbox" id="newsActive" checked/>
        <label for="newsActive" class="text-sm">Active</label>
      </div>
      <div class="flex gap-3 pt-2">
        <button type="submit" class="flex-1 bg-primary text-white py-2 rounded-lg font-medium">Save</button>
        <button type="button" onclick="closeNewsModal()" class="px-6 py-2 border rounded-lg">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Order Details Modal -->
<div id="orderModal" class="fixed inset-0 modal-backdrop z-50 hidden items-center justify-center p-4" onclick="if(event.target===this) closeOrderModal()">
  <div class="bg-white dark:bg-background-dark rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-auto">
    <div class="sticky top-0 bg-white dark:bg-background-dark border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold">Order Details</h3>
      <button onclick="closeOrderModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
    </div>
    <div id="orderModalContent" class="p-6">Loading...</div>
  </div>
</div>

<!-- Delivery Rate Modal -->
<div id="deliveryRateModal" class="fixed inset-0 modal-backdrop z-50 hidden items-center justify-center p-4" onclick="if(event.target===this) closeDeliveryRateModal()">
  <div class="bg-white dark:bg-background-dark rounded-lg shadow-2xl w-full max-w-md">
    <div class="border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold" id="deliveryRateModalTitle">Add Delivery Rate</h3>
      <button onclick="closeDeliveryRateModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
    </div>
    <form id="deliveryRateForm" class="p-6 space-y-4">
      <input type="hidden" id="deliveryRateIndex"/>
      <div>
        <label class="block text-sm font-medium mb-1">State/UT Name *</label>
        <input type="text" id="deliveryState" required class="w-full px-3 py-2 border rounded-lg" placeholder="Tamil Nadu"/>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Region</label>
        <select id="deliveryRegion" class="w-full px-3 py-2 border rounded-lg">
          <option value="South India">South India</option>
          <option value="North India">North India</option>
          <option value="East India">East India</option>
          <option value="West India">West India</option>
          <option value="Central India">Central India</option>
          <option value="Northeast India">Northeast India</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Charge (â‚¹) *</label>
        <input type="number" id="deliveryCharge" required class="w-full px-3 py-2 border rounded-lg" placeholder="150"/>
      </div>
      <div class="flex gap-3 pt-2">
        <button type="submit" class="flex-1 bg-primary text-white py-2 rounded-lg font-medium">Save</button>
        <button type="button" onclick="closeDeliveryRateModal()" class="px-6 py-2 border rounded-lg">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script type="module" src="js/admin-new.js"></script>
</body>
</html>
